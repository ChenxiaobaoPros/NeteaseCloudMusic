<ContentControl x:Class="NeteaseCloudMusic.Wpf.View.IndirectView.PlayPanelView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                  xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                      xmlns:prism="http://www.codeplex.com/prism"
                xmlns:converter="clr-namespace:NeteaseCloudMusic.Wpf.BindingConverter"
                xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"
                Loaded="ContentControl_Loaded"
             xmlns:local="clr-namespace:NeteaseCloudMusic.Wpf.View.IndirectView"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="800" >
    <ScrollViewer x:Name="rootScroll">
        <Grid Margin="10,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="400" x:Name="lrcPanelPart"/>
                <RowDefinition  />
            </Grid.RowDefinitions>
            <!--点击用户名称导航命令-->
            <Button x:Name="btnCommand"  Command="{Binding UserCommand}" Visibility="Collapsed"/>
            <!--点击专辑名称导航-->
            <Button x:Name="btnArtistCommand"  Command="{Binding ArtistCommand}" Visibility="Collapsed"/>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="350"/>
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <StackPanel Margin="0,30">
                    <Grid x:Name="grdImage" Height=" 250"  RenderTransformOrigin="0.5,0.5" Margin="0,30,0,30">
                        <!--<Grid.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform/>
                                <SkewTransform/>
                                <RotateTransform/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </Grid.RenderTransform>-->
                        <Image Stretch="Uniform"     Source="/NeteaseCloudMusic.Wpf;component/Assets/player_disk_cover.scale-200.png"/>
                        <Border    >
                            <Border.Clip>
                                <EllipseGeometry Center="172,122" RadiusX="80" RadiusY=" 80"/>
                            </Border.Clip>
                            <Image Stretch="Uniform" Source="{Binding TrackImage}"  >
                                <!--<Image.Source>
                                    <BitmapImage UriSource="{Binding TrackImage,TargetNullValue=/NeteaseCloudMusic.Wpf;component/Assets/player_disk_cover.scale-200.png}" />
                                </Image.Source>-->
                            </Image>
                        </Border>
                    </Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                        <StackPanel.Resources>
                            <Style TargetType="Button" BasedOn="{StaticResource DefaultButtonStyle}"/>
                            <Style TargetType="Path">
                                <Setter Property="Stretch" Value="Uniform"/>
                                <Setter Property="Height" Value=" 12"/>
                                <Setter Property="StrokeThickness" Value=" 1.2"/>
                                <Setter Property="Stroke">
                                    <Setter.Value >
                                        <SolidColorBrush Color="{StaticResource WindowForeGrayColor}"/>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                            <Style TargetType="TextBlock" BasedOn="{StaticResource GrayTopTextBoxStyle}">
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Margin" Value="2,0,0,0"/>
                            </Style>
                        </StackPanel.Resources>
                        <Button  >
                            <StackPanel Orientation="Horizontal" >
                                <Path
                            
                              Data=" F1M16844,6398L16879,6361 16913,6322 16945,6282 16974,6240 17002,6197 17027,6153 17050,6107 17071,6060 17090,6012 17106,5964 17120,5915 17132,5865 17141,5814 17147,5763 17151,5712 17153,5661 17152,5610 17149,5559 17143,5508 17134,5458 17123,5407 17110,5358 17094,5309 17076,5261 17056,5214 17033,5168 17008,5124 16981,5080 16952,5038 16921,4997 16888,4958 16853,4921 16816,4885 16777,4852 16737,4820 16696,4790 16653,4762 16608,4736 16563,4713 16516,4692 16469,4673 16420,4656 16371,4642 16321,4630 16271,4621 16220,4614 16169,4610 16118,4608 16066,4609 16015,4612 15964,4618 15914,4626 15864,4636 15814,4649 15765,4665 15717,4683 15670,4703 15624,4725 15579,4750 15536,4777 15493,4806 15453,4837 15413,4870 15376,4905 15340,4941 15306,4980 15274,5019 15244,5061 15216,5104 15190,5148 15166,5193 15145,5240 15126,5287 15109,5336 M15009,5335L15014,5346 15022,5355 15031,5363 15041,5368 15053,5371 15065,5371 15077,5368 15087,5363 15096,5355 15104,5346 15109,5335 M15009,5336L14992,5287 14973,5240 14952,5193 14928,5148 14902,5104 14874,5061 14844,5019 14812,4980 14778,4941 14742,4905 14705,4870 14665,4837 14625,4806 14582,4777 14539,4750 14494,4725 14448,4703 14401,4683 14353,4665 14304,4649 14254,4636 14204,4626 14154,4618 14103,4612 14052,4609 14000,4608 13949,4610 13898,4614 13847,4621 13797,4630 13747,4642 13698,4656 13649,4673 13602,4692 13555,4713 13510,4736 13465,4762 13422,4790 13381,4820 13341,4852 13302,4885 13265,4921 13230,4958 13197,4997 13166,5038 13137,5080 13110,5124 13085,5168 13062,5214 13042,5261 13024,5309 13008,5358 12995,5407 12984,5458 12975,5508 12969,5559 12966,5610 12965,5661 12967,5712 12971,5763 12977,5814 12986,5865 12998,5915 13012,5964 13028,6012 13047,6060 13068,6107 13091,6153 13116,6197 13144,6240 13173,6282 13205,6322 13239,6361 13274,6398 M13274,6398L15022,8136 M15022,8136L15031,8143 15042,8148 15053,8151 15065,8151 15076,8148 15087,8143 15096,8136 M15096,8136L16844,6398" >

                                </Path>
                                <TextBlock Text="喜欢"  />
                            </StackPanel>
                        </Button>
                        <Button>
                            <StackPanel Orientation="Horizontal">
                                <Image Stretch="Uniform" Width=" 15" >
                                    <Image.Resources>
                                        <SolidColorBrush x:Key="brush" Color="{StaticResource WindowForeGrayColor}"/>
                                    </Image.Resources>
                                    <Image.Source>
                                        <DrawingImage>
                                            <DrawingImage.Drawing>
                                                <DrawingGroup>
                                                    <GeometryDrawing Brush="{StaticResource brush}" Geometry="F1M27513.8216145039,9010C27513.8216145039,9011.55833466038 27512.5583346604,9012.82161450386 27511,9012.82161450386 27509.4416653396,9012.82161450386 27508.1783854961,9011.55833466038 27508.1783854961,9010 27508.1783854961,9008.44166533962 27509.4416653396,9007.17838549614 27511,9007.17838549614 27512.5583346604,9007.17838549614 27513.8216145039,9008.44166533962 27513.8216145039,9010z"/>
                                                    <GeometryDrawing Brush="{StaticResource brush}" Geometry="F1M26840.8216145039,9010C26840.8216145039,9011.55833466038 26839.5583346604,9012.82161450386 26838,9012.82161450386 26836.4416653396,9012.82161450386 26835.1783854961,9011.55833466038 26835.1783854961,9010 26835.1783854961,9008.44166533962 26836.4416653396,9007.17838549614 26838,9007.17838549614 26839.5583346604,9007.17838549614 26840.8216145039,9008.44166533962 26840.8216145039,9010z"/>
                                                    <GeometryDrawing Geometry="F1M27511,9010L27914,9010 M27175,9898L27914,9010 M28309,10050L28309,10252 M28309,10252L27185,10252 M26818,8302L26838,9010 M26838,9010L26435,9010 M27175,9898L26435,9010 M27490,8302L27511,9010 M26818,8302L27490,8302 M26060,10050L26060,10252 M27185,10252L26060,10252">
                                                        <GeometryDrawing.Pen>
                                                            <Pen Brush="{StaticResource brush}" Thickness="200" StartLineCap="Round" EndLineCap="Round" DashCap="Flat" LineJoin="Round" MiterLimit="1"/>
                                                        </GeometryDrawing.Pen>
                                                    </GeometryDrawing>

                                                </DrawingGroup>
                                            </DrawingImage.Drawing>
                                        </DrawingImage>
                                    </Image.Source>
                                </Image>
                                <TextBlock Text="下载"/>
                            </StackPanel>
                        </Button>
                        <Button >
                            <StackPanel Orientation="Horizontal">
                                <Path Data="F1M12681,7287L13095,7273 13095,7782 12283,7796 12283,7287 M12681,7287L12681,7147 M12283,7287L12283,7147 M12283,7147L12681,7147 M12512,7535L12866,7535 M12689,7712L12689,7357 "/>
                                <TextBlock Text="收藏"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
                <Image Grid.Column="0" Stretch="Uniform" Height="120"   
                       VerticalAlignment="Top"  x:Name="imgDiskControl"
                       Source="/NeteaseCloudMusic.Wpf;component/Assets/player_needle.scale-200.png" RenderTransformOrigin="0.2,0 ">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform Angle="-40"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>


                <DockPanel Grid.Column=" 1" Margin="0,30">
                    <DockPanel DockPanel.Dock="Top">
                        <Button Style="{StaticResource DefaultButtonStyle}" DockPanel.Dock="Right"  Height="25" Width="30">
                            <Grid  >
                                <Grid.Resources>
                                    <Style TargetType="ed:BlockArrow">
                                        <Setter Property="Fill" >
                                            <Setter.Value >
                                                <SolidColorBrush  Color="{StaticResource WindowTitleColor}"/>
                                            </Setter.Value>
                                        </Setter>
                                        <Setter Property="Height" Value=" 25"/>
                                        <Setter Property="Width" Value="8"/>
                                        <Setter Property="ArrowBodySize" Value=" 0.125"/>
                                        <Setter Property="StrokeEndLineCap" Value="Flat"/>
                                        <!--<Setter Property="RenderTransform">
                                            <Setter.Value >
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform/>
                                                    <RotateTransform Angle="45"/>
                                                    <TranslateTransform/>
                                                </TransformGroup>
                                            </Setter.Value>
                                        </Setter>-->
                                    </Style>
                                </Grid.Resources>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition Height="0*"/>
                                </Grid.RowDefinitions>
                                <ed:BlockArrow    Orientation="Up"   VerticalAlignment="Bottom" 
                                                    Height="11"   Width="6"  HorizontalAlignment="Left" RenderTransformOrigin="0.5,0.5" Margin="6,-2,-6,8" >
                                    <ed:BlockArrow.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform/>
                                            <SkewTransform/>
                                            <RotateTransform Angle="45"/>
                                            <TranslateTransform/>
                                        </TransformGroup>
                                    </ed:BlockArrow.RenderTransform>

                                </ed:BlockArrow>

                                <ed:BlockArrow      Orientation="Down"  
                                          HorizontalAlignment="Right" VerticalAlignment="Top" 
                                                     Height="11"   Width="6" RenderTransformOrigin="0.5,0.5" Margin="-20,8,7,-8" Grid.RowSpan="2"  >
                                    <ed:BlockArrow.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform/>
                                            <SkewTransform/>
                                            <RotateTransform Angle="45"/>
                                            <TranslateTransform/>
                                        </TransformGroup>
                                    </ed:BlockArrow.RenderTransform>
                                </ed:BlockArrow>

                            </Grid>
                        </Button>
                        <TextBlock Text="{Binding TrackName}" Style="{StaticResource DarkBottomTextBoxStyle}" FontSize="{StaticResource WindowProtrudingFontSize}"/>
                    </DockPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,5"
                                DockPanel.Dock="Top">
                        <TextBlock Text="专辑: " Style="{StaticResource DarkBottomTextBoxStyle}"/>
                        <Button Style="{StaticResource EmptyButtonStyle}"
                                Command="{Binding AlbumCommand}"
                                CommandParameter="{Binding AlbumId}">
                            <TextBlock Text="{Binding AlbumName}" Style="{StaticResource DarkBottomTextBoxStyle}" Foreground="Blue"/>
                        </Button>
                        <TextBlock Text="歌手: " Style="{StaticResource DarkBottomTextBoxStyle}" Margin="15,0"/>
                        <ItemsControl ItemsSource="{Binding Artists}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel  Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Button Style="{StaticResource EmptyButtonStyle}" 
                                            Command="{Binding ElementName=btnArtistCommand,Path=Command}"
                                            CommandParameter="{Binding Id}"
                                            Content="{Binding Name}" Foreground="Blue" Margin="0,0,2,0"/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <TextBlock Text="来源: " Style="{StaticResource DarkBottomTextBoxStyle}" Margin="15,0"/>
                        <Button Style="{StaticResource EmptyButtonStyle}">
                            <TextBlock Text="{Binding AlbumName}" Style="{StaticResource DarkBottomTextBoxStyle}" Foreground="Blue"/>
                        </Button>
                    </StackPanel>
                    <ListBox Margin="0,20,20,0" 
                             x:Name="lstLryics"
                             Background="Transparent" BorderThickness="0"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                             ItemsSource="{Binding Lryics}"
                             DisplayMemberPath="Value" >
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Foreground" >
                                    <Setter.Value >
                                        <SolidColorBrush Color="{StaticResource WindowForeDarkColor}"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="FontSize" Value="{StaticResource WindowMainFontSize}"/>
                                <Setter Property="FontFamily" Value="{StaticResource WindowMainFont}"/>
                                <Setter Property="Margin" Value="0,2"/>
                                <Setter Property="Template">
                                    <Setter.Value >
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <DockPanel  >
                                                <Button Style="{StaticResource EmptyButtonStyle}"
                                                        Content="{TemplateBinding Content}" 
                                                        Foreground="{TemplateBinding Foreground   }"
                                                        Click="LrcButton_Click"
                                                        Margin="0,5,0,0"/>
                                            </DockPanel>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="true">
                                        <Setter Property="Foreground" >
                                            <Setter.Value >
                                                <SolidColorBrush Color="{StaticResource WindowTitleColor}"/>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <!--<ListBox.ItemTemplate>
                            <DataTemplate>
                                <DockPanel>
                                   
                                    <TextBlock Text="{Binding Value}" 
                                               Style="{StaticResource DarkBottomTextBoxStyle}" VerticalAlignment="Stretch"
                                               Foreground="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem},Path=Foreground}"/>
                                </DockPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>-->
                    </ListBox>

                </DockPanel>

            </Grid>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition  />
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="250"/>
                </Grid.ColumnDefinitions>
                <StackPanel>
                    <StackPanel.Resources>
                        <Style TargetType="ListBox"   >
                            <Setter Property="Background"  Value="Transparent" />
                            <Setter Property="BorderThickness" Value=" 0"/>
                            <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="True" />
                            <Setter Property="Template">
                                <Setter.Value >
                                    <ControlTemplate TargetType="ListBox">
                                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderBrush}">
                                            <ItemsPresenter/>
                                        </Border>
                                    </ControlTemplate>

                                </Setter.Value>
                            </Setter>
                            <Setter Property="ItemContainerStyle">
                                <Setter.Value>
                                    <Style TargetType="ListBoxItem" >
                                        <!--<Setter Property="Height" Value=" 60"/>-->
                                        <Setter Property="Padding" Value=" 0"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListBoxItem">
                                                    <Grid>
                                                        <Rectangle Style="{StaticResource HorizontalDecorationRectangleStyle}" VerticalAlignment="Top"/>
                                                        <ContentPresenter/>
                                                        <!--<Rectangle Style="{StaticResource HorizontalDecorationRectangleStyle}" VerticalAlignment="Bottom"/>-->
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="ItemTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <DockPanel >
                                            <Image HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,5"
                                Height="30" Stretch="UniformToFill"  Width=" 30"     >
                                                <Image.Source>
                                                    <BitmapImage UriSource="{Binding User.UserImage}" DecodePixelWidth="30" CreateOptions="IgnoreColorProfile"/>
                                                </Image.Source>
                                                <Image.Clip>
                                                    <EllipseGeometry RadiusX="15" RadiusY="15" Center="15,15"  />
                                                </Image.Clip>
                                            </Image>
                                            <DockPanel  Margin="2"   >
                                                <DockPanel   DockPanel.Dock="Top">
                                                    <Button Style="{StaticResource EmptyButtonWithFocusStyle}"  
                                            VerticalAlignment="Top" Foreground="Blue" 
                                            Command="{Binding ElementName=btnCommand,Path=Command}" 
                                            CommandParameter="{Binding User.UserId}"
                                            Content="{Binding User.UserName,FallbackValue=未知用户}"/>
                                                    <TextBlock Style="{StaticResource DarkBottomTextBoxStyle}" VerticalAlignment="Top"  Text="{Binding Content,StringFormat=: {0}}"  TextWrapping="Wrap"/>

                                                </DockPanel>

                                                <DockPanel DockPanel.Dock="Bottom">
                                                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                                        <TextBlock Style="{StaticResource GrayTopTextBoxStyle}" Text="{Binding LikedCount,StringFormat=👍({0})}"/>
                                                        <Rectangle Margin="5,0" Style="{StaticResource VerticalDecorationRectangleStyle}"/>
                                                        <TextBlock Style="{StaticResource GrayTopTextBoxStyle}" Text="分享"/>
                                                        <Rectangle Margin="5,0" Style="{StaticResource VerticalDecorationRectangleStyle}"/>
                                                        <TextBlock Style="{StaticResource GrayTopTextBoxStyle}" Text="回复"/>
                                                    </StackPanel>
                                                    <TextBlock Style="{StaticResource GrayTopTextBoxStyle}" Text="{Binding Time}"  />
                                                </DockPanel>
                                                <Grid  DataContext="{Binding BeReplied}" 
                                                                     x:Name="repliedMsg"
                                                                     Margin="30,0,0,0">
                                                    <Grid.Background>
                                                        <SolidColorBrush Color="{StaticResource WindowForeGrayColor}"/>
                                                    </Grid.Background>
                                                    <DockPanel  Margin="8">
                                                        <Button Style="{StaticResource EmptyButtonStyle}"
                                                                 Command="{Binding ElementName=btnCommand,Path=Command}" 
                                            CommandParameter="{Binding User.UserId}">
                                                            <TextBlock Text="{Binding User.UserName,FallbackValue=未知用户,StringFormat=@{0}:  }" 
                                                                   VerticalAlignment="Top"
                                                                   Style="{StaticResource DarkBottomTextBoxStyle}" Foreground="Blue"></TextBlock>
                                                        </Button>

                                                        <TextBlock TextWrapping="Wrap" Style="{StaticResource DarkBottomTextBoxStyle}"
                                                                   VerticalAlignment="Top"
                                                                   Text="{Binding Content}"/>
                                                    </DockPanel>
                                                </Grid>
                                            </DockPanel>
                                        </DockPanel>
                                        <DataTemplate.Triggers>
                                            <DataTrigger Binding="{Binding HasReplied}" Value="false" >
                                                <Setter TargetName="repliedMsg" Property="Visibility" Value="Collapsed"/>
                                            </DataTrigger>

                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </StackPanel.Resources>
                    <TextBlock Style="{StaticResource DarkBottomTextBoxStyle}" Text="{Binding CommentCount,StringFormat=评论（{0}）}"/>
                    <Rectangle Margin="0,5" Style="{StaticResource HorizontalDecorationRectangleStyle}"/>
                    <Grid >
                        <Grid.Background>
                            <SolidColorBrush Color="{StaticResource WindowForeGrayColor}"/>
                        </Grid.Background>
                        <StackPanel Margin="8">
                            <Grid>
                                <TextBox Height="80" TextWrapping="Wrap" AcceptsReturn="True"
                                         MaxLength="140" x:Name="txtInput"></TextBox>
                                <TextBlock Text="{Binding ElementName=txtInput,Path=Text.Length,UpdateSourceTrigger=PropertyChanged  }" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="3"/>
                            </Grid>
                            <Grid Margin="0,15,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <StackPanel.Resources>
                                        <Style TargetType="Button" BasedOn="{StaticResource EmptyButtonStyle}">
                                            <Setter Property="Margin" Value=" 0,0,5,0"/>
                                        </Style>
                                        <Style TargetType="TextBlock" BasedOn="{StaticResource DarkBottomTextBoxStyle}">
                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                            <Setter Property="FontSize" Value=" 16"/>
                                        </Style>
                                    </StackPanel.Resources>
                                    <Button  >
                                        <TextBlock Text="😀"   />
                                    </Button>

                                    <Button  >
                                        <TextBlock Text="@"/>
                                    </Button>
                                    <Button  >
                                        <TextBlock Text="#"  />
                                    </Button>
                                </StackPanel>
                                <Button HorizontalAlignment="Right" IsDefault="True"
                                        IsEnabled="{Binding ElementName=txtInput,Path=Text.Length,Converter={x:Static converter:ValueConverterFactory.TextLenthConverter}}"
                                       Command="{Binding AddCommentCommand}"
                                        CommandParameter="{Binding ElementName=txtInput,Path=Text}"
                                        >
                                    <TextBlock Text="评论" Style="{StaticResource GrayTopTextBoxStyle}"/>
                                </Button>
                            </Grid>
                        </StackPanel>
                    </Grid>
                    <StackPanel Visibility="{Binding HotComments.Count,Converter={x:Static converter:ValueConverterFactory.Double2VisibilityConverter}}">
                        <TextBlock Text="精彩评论" Style="{StaticResource DarkBottomTextBoxStyle}" Margin="0,20,0,15"/>
                        <!--<Rectangle Style="{StaticResource HorizontalDecorationRectangleStyle}"/>-->
                        <ListBox  ItemsSource="{Binding HotComments}"/>
                    </StackPanel>
                    <StackPanel  Visibility="{Binding NewComments.Count,Converter={x:Static converter:ValueConverterFactory.Double2VisibilityConverter}}">
                        <TextBlock Text="最新评论" Style="{StaticResource DarkBottomTextBoxStyle}" Margin="0,20,0,15"/>
                        <!--<Rectangle Style="{StaticResource HorizontalDecorationRectangleStyle}"/>-->
                        <ListBox  ItemsSource="{Binding NewComments}"/>
                    </StackPanel>

                </StackPanel>
                <StackPanel Grid.Column="2">
                    <TextBlock Style="{StaticResource DarkBottomTextBoxStyle}" Text="包含这首歌的歌单"/>
                    <Rectangle Margin="0,5" Style="{StaticResource HorizontalDecorationRectangleStyle}"/>
                    <ListBox Background="Transparent" 
                             ScrollViewer.IsDeferredScrollingEnabled="False"
                             BorderThickness="0"
                             ItemsSource="{Binding ContainsThisTrackList}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="SelectionChanged">
                                <prism:InvokeCommandAction  Command="{Binding SimiPlayListCommand}" TriggerParameterPath="Source.SelectedItem" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <ListBox.Template>
                            <ControlTemplate TargetType="ListBox">
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderBrush}">
                                    <ItemsPresenter/>
                                </Border>
                            </ControlTemplate>

                        </ListBox.Template>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem" >
                                <Setter Property="Padding" Value=" 0"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <Grid>
                                                <ContentPresenter/>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <DockPanel Margin="0,5">
                                    <Image Stretch="Uniform"   Width="48">
                                        <Image.Source>
                                            <BitmapImage DecodePixelWidth=" 48" UriSource="{Binding PicUrl}"/>
                                        </Image.Source>
                                    </Image>
                                    <StackPanel Margin="5,000,0,0">
                                        <TextBlock Text="{Binding  Name}" Style="{StaticResource DarkBottomTextBoxStyle}"/>
                                        <TextBlock Text="{Binding PlayCount,StringFormat=播放： {0},Converter={x:Static converter:ValueConverterFactory.Int2FormatStringConverter}}" Style="{StaticResource GrayTopTextBoxStyle}"/>
                                    </StackPanel>
                                </DockPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    <TextBlock Style="{StaticResource DarkBottomTextBoxStyle}" Text="相似歌曲"/>
                    <Rectangle Margin="0,5" Style="{StaticResource HorizontalDecorationRectangleStyle}"/>
                    <ListBox Background="Transparent" 
                             ScrollViewer.IsDeferredScrollingEnabled="False"
                             BorderThickness="0"
                             ItemsSource="{Binding SimiMusics}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="SelectionChanged">
                                <prism:InvokeCommandAction  Command="{Binding SimiMusicCommand}" TriggerParameterPath="Source.SelectedItem" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <ListBox.Template>
                            <ControlTemplate TargetType="ListBox">
                                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderBrush}">
                                    <ItemsPresenter/>
                                </Border>
                            </ControlTemplate>

                        </ListBox.Template>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem" BasedOn="{StaticResource DefaultListBoxItemStyle}">
                                <!--<Setter Property="Height" Value=" 60"/>-->
                                <Setter Property="Padding" Value=" 0"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <DockPanel Height="40">
                                    <TextBlock Style="{StaticResource GrayTopTextBoxStyle}" MaxWidth="100"
                                               VerticalAlignment="Center" DockPanel.Dock="Right" Text="{Binding Artists[0].Name,FallbackValue=未知}"/>
                                    <TextBlock Style="{StaticResource DarkBottomTextBoxStyle}" VerticalAlignment="Center" Text="{Binding Name}"/>
                                </DockPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Grid>
        </Grid>
    </ScrollViewer>
</ContentControl>
